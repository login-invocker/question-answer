<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/manageuser.css">
    <link rel="stylesheet" href="./vendors/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-
    hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
</head>
<body>
   <marquee behavior="" direction="" class="p-3 bg-primary text-white">
        <h3 class="" id="header">
            User Management
        </h3>
   </marquee>
    <table class="table" id="table">
        <thead>
            <tr>
                <th>STT</th>
                <th>UserName</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Role</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody id="tbody">

        </tbody>
    </table>
    <div id="container">
        <div class="card border border-secondary rounded" id="card">
            <div class="card-header " id="card-header">
                <h4>InfoUser</h4> 
                <button id="close" class="btn btn-primary"><i class="fas fa-times"></i></button>
            </div>
            <div class="card-body" id="card-body">
    
            </div>
            <!-- <div class="card-footer" id="card-footer">

            </div> -->
        </div>
    </div>

    <script src="./vendors/jquery/jquery-2.2.4.min.js"></script>
    <script>
        var arr1 = [
            {
                "id": 01,
                "userName":"tienvu112",
                "fullName": "vu tien",
                "userPass": "deptrai",
                "userEmail": "vutiendzil@gmail.com",
                "cellPhone": "0338660122",
                "dateOfBirth": "2000-07-15",
                "sex": "nam",
                "role": null
            },
            {
                "id": 02,
                "userName":"tungnui221",
                "fullName": "thanh tung",
                "userPass": "deptrai",
                "userEmail": "tung@gmail.com",
                "cellPhone": "0338660122",
                "dateOfBirth": "2000-07-15",
                "sex": "nam",
                "role": null
            },
            {
                "id": 03,
                "userName":"oaiker222",
                "fullName": "thanh tung",
                "userPass": "deptrai",
                "userEmail": "tung@gmail.com",
                "cellPhone": "0338660122",
                "dateOfBirth": "2000-07-15",
                "sex": "nam",
                "role": null
            },
            {
                "id": 04,
                "userName":"vuongkim222",
                "fullName": "thanh tung",
                "userPass": "deptrai",
                "userEmail": "tung@gmail.com",
                "cellPhone": "0338660122",
                "dateOfBirth": "2000-07-15",
                "sex": "nam",
                "role": null
            }
        ]

        
            
               
            function htmlTbody() {
                for ( i = 0 ; i < arr1.length ; i++) {
                    document.getElementById("tbody").innerHTML +=
                    
        
                    
                    "<td>"+(i+1)+"</td><td>"+arr1[i]["userName"]+"</td><td>"+arr1[i]["userEmail"]+"</td><td>"+
                        arr1[i]["cellPhone"] + "</td><td>"+arr1[i]["role"] +"</td><td>"
                    +
                            `
                    <button class='btn' id='view' onClick="getInfoUser(${arr1[i]["id"]})" >
                    <i class='fas fa-eye'></i></button> <button onClick="deleteUser(${arr1[i]["id"]})" class='btn' id='delete'><i class='fas fa-trash'></i></button></td>`
                }
            }
            htmlTbody()
            const getInfoUser = (id) => {
                document.getElementById("card").style.display = "block"
                let content = arr1.map( (arr) => {
                        if (id === arr.id) {
                            return arr
                        }
                    })
                content = content.filter(function( user ) {
                    return user !== undefined;
                });
                document.getElementById("card-body").innerHTML =
                 `
                        <div>
                            <label class='form-label' for='username'> User Name :</label>
                            <input type='text' id='username' class='' value='${content[0]["userName"]}' autofocus >    
                        </div>
                        <div>
                            <label class='form-label' for='fullname'>Full Name :</label>
                            <input type='text' id='fullname' class='' value='${content[0]["fullName"]}'>    
                        </div>
                        <div>
                            <label class='form-label' for='pass'>User Pass :</label>
                            <input type='text' id='pass' class='' value='${content[0]["userPass"]}'>    
                        </div>
                        <div>
                            <label class='form-label' for='email'>User Email :</label>
                            <input type='text' id='email' class='' value='${content[0]["userEmail"]}'>    
                        </div>
                        <div>
                            <label class='form-label' for='cellphone'>Cell Phone :</label>
                            <input type='text' id='cellphone' class='' value='${content[0]["cellPhone"]}'>    
                        </div>
                        <div>
                            <label class='form-label' for='dateofbirth'>Date Of Birth :</label>
                            <input type='date' id='dateofbirth' class='' value='${content[0]["dateOfBirth"]}'>    
                        </div>
                        <div>
                            <label class='form-label' for='sex'>Sex :</label>
                            <input type='text' id='sex' class='' value='${content[0]["sex"]}'>    
                        </div>
                        <div>
                            <label class='form-label' for='role'>Role :</label>
                            <input type='text' id='role' class='' value='${content[0]["role"]}'>    
                        </div>
                        <button class='btn btn-primary' onClick = "updateInfo(${id})" id='sucessupdate' style='width: 100%' >Update</button>
                    
                 `
               
            }
            const updateInfo = (iduser) => {
                    let contents = arr1.map( (arr) => {
                        if (iduser === arr.id) {
                            return arr
                        }
                    })
                    contents = contents.filter(function( user ) {
                        return user !== undefined;
                    });
                    var newinfo = {
                            // "id": document.getElementById('iduser').value,
                            "userName":document.getElementById('username').value,
                            "fullName": document.getElementById('fullname').value,
                            "userPass": document.getElementById('pass').value,
                            "userEmail": document.getElementById('email').value,
                            "cellPhone": document.getElementById('cellphone').value,
                            "dateOfBirth": document.getElementById('dateofbirth').value,
                            "sex": document.getElementById('sex').value,
                            "role": document.getElementById('role').value
                        }

                   
                 
                        
                        for(j = 0 ; j < arr1.length ; j ++) {
                            if(arr1[j]['id'] === iduser) {
                                arr1[j] = newinfo
                            }
                        }
                        
                    document.getElementById('card').style.display = 'none'
                    document.getElementById('tbody').innerHTML = ''
                    htmlTbody()
                        
                    
                }
            const deleteUser= (id) => {
                for(j = 0 ; j < arr1.length ; j ++) {
                    if(arr1[j]['id'] === id) {
                        arr1.splice(j,1);
                    }
                }
                document.getElementById('tbody').innerHTML = ''
                htmlTbody()
          
            }
            document.getElementById('close').onclick = function() {
                document.getElementById('card').style.display = 'none'
            }
           
    </script>
</body>
</html>                        
